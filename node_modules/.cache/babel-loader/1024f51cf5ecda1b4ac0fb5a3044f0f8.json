{"ast":null,"code":"import firebase from \"firebase/app\";\nimport auth from \"../../fireBase\";\nimport { LOAD_PROFILE, LOGIN_FAIL, LOGIN_REQUEST, LOGIN_SUCCESS, LOG_OUT } from \"../actionType\";\nexport const login = () => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope(\"https://www.googleapis.com/auth/youtube.force-ssl\");\n    const res = await auth.signInWithPopup(provider);\n    const accessToken = res.credential.accessToken;\n    const profile = {\n      name: res.additionalUserInfo.profile.name,\n      photoURL: res.additionalUserInfo.profile.picture\n    };\n    sessionStorage.setItem(\"ytc-access-token\", accessToken);\n    sessionStorage.setItem(\"ytc-user\", JSON.stringify(profile));\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: accessToken\n    });\n    dispatch({\n      type: LOAD_PROFILE,\n      payload: profile\n    });\n  } catch (error) {\n    console.log(error.message);\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.message\n    });\n  }\n};\nexport const log_out = () => async dispatch => {\n  await auth.signOut();\n  dispatch({\n    type: LOG_OUT\n  });\n  sessionStorage.removeItem(\"ytc-access-token\");\n  sessionStorage.removeItem(\"ytc-user\");\n};","map":{"version":3,"sources":["/home/sierra7/Desktop/YOUTUBE_CLONE/src/redux/actions/auth.action.js"],"names":["firebase","auth","LOAD_PROFILE","LOGIN_FAIL","LOGIN_REQUEST","LOGIN_SUCCESS","LOG_OUT","login","dispatch","type","provider","GoogleAuthProvider","addScope","res","signInWithPopup","accessToken","credential","profile","name","additionalUserInfo","photoURL","picture","sessionStorage","setItem","JSON","stringify","payload","error","console","log","message","log_out","signOut","removeItem"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SACEC,YADF,EAEEC,UAFF,EAGEC,aAHF,EAIEC,aAJF,EAKEC,OALF,QAMO,eANP;AAOA,OAAO,MAAMC,KAAK,GAAG,MAAM,MAAOC,QAAP,IAAoB;AAC7C,MAAI;AACFA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEL;AADC,KAAD,CAAR;AAGA,UAAMM,QAAQ,GAAG,IAAIV,QAAQ,CAACC,IAAT,CAAcU,kBAAlB,EAAjB;AACAD,IAAAA,QAAQ,CAACE,QAAT,CAAkB,mDAAlB;AACA,UAAMC,GAAG,GAAG,MAAMZ,IAAI,CAACa,eAAL,CAAqBJ,QAArB,CAAlB;AAEA,UAAMK,WAAW,GAAGF,GAAG,CAACG,UAAJ,CAAeD,WAAnC;AACA,UAAME,OAAO,GAAG;AACdC,MAAAA,IAAI,EAAEL,GAAG,CAACM,kBAAJ,CAAuBF,OAAvB,CAA+BC,IADvB;AAEdE,MAAAA,QAAQ,EAAEP,GAAG,CAACM,kBAAJ,CAAuBF,OAAvB,CAA+BI;AAF3B,KAAhB;AAIAC,IAAAA,cAAc,CAACC,OAAf,CAAuB,kBAAvB,EAA2CR,WAA3C;AACAO,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAmCC,IAAI,CAACC,SAAL,CAAeR,OAAf,CAAnC;AACAT,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEJ,aADC;AAEPqB,MAAAA,OAAO,EAAEX;AAFF,KAAD,CAAR;AAIAP,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEP,YADC;AAEPwB,MAAAA,OAAO,EAAET;AAFF,KAAD,CAAR;AAID,GAvBD,CAuBE,OAAOU,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AACAtB,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEN,UADC;AAEPuB,MAAAA,OAAO,EAAEC,KAAK,CAACG;AAFR,KAAD,CAAR;AAID;AACF,CA/BM;AAiCP,OAAO,MAAMC,OAAO,GAAG,MAAM,MAAOvB,QAAP,IAAoB;AAC/C,QAAMP,IAAI,CAAC+B,OAAL,EAAN;AACAxB,EAAAA,QAAQ,CAAC;AACPC,IAAAA,IAAI,EAAEH;AADC,GAAD,CAAR;AAGAgB,EAAAA,cAAc,CAACW,UAAf,CAA0B,kBAA1B;AACAX,EAAAA,cAAc,CAACW,UAAf,CAA0B,UAA1B;AACD,CAPM","sourcesContent":["import firebase from \"firebase/app\";\nimport auth from \"../../fireBase\";\nimport {\n  LOAD_PROFILE,\n  LOGIN_FAIL,\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOG_OUT,\n} from \"../actionType\";\nexport const login = () => async (dispatch) => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST,\n    });\n    const provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope(\"https://www.googleapis.com/auth/youtube.force-ssl\");\n    const res = await auth.signInWithPopup(provider);\n\n    const accessToken = res.credential.accessToken;\n    const profile = {\n      name: res.additionalUserInfo.profile.name,\n      photoURL: res.additionalUserInfo.profile.picture,\n    };\n    sessionStorage.setItem(\"ytc-access-token\", accessToken);\n    sessionStorage.setItem(\"ytc-user\", JSON.stringify(profile));\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: accessToken,\n    });\n    dispatch({\n      type: LOAD_PROFILE,\n      payload: profile,\n    });\n  } catch (error) {\n    console.log(error.message);\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.message,\n    });\n  }\n};\n\nexport const log_out = () => async (dispatch) => {\n  await auth.signOut();\n  dispatch({\n    type: LOG_OUT,\n  });\n  sessionStorage.removeItem(\"ytc-access-token\");\n  sessionStorage.removeItem(\"ytc-user\");\n};\n"]},"metadata":{},"sourceType":"module"}